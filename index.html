<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log in</title>
    <link rel="stylesheet" href="hoved.css">
</head>
<style>
    /* lokal stilark */

    button {
        /* midtstilt med responsiv bredde */
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }

    .container {
        max-width: 300px;
    }

    .container a {
        text-align: justify;
    }
</style>

<body>
    <!-- TODO:
    Alt skal inn i en div som capper bredden til 300px og sentrerer innholdet.
    Bark-ikonet i øverst i midten.
    Tekst som sier "Logg inn til Barker". kanskje h1 eller h2.
    En input for brukernavn.
    En input for passord.
    En knapp som sier "Logg inn". denne må bruke en event listener som sjekker om brukernavn og passord er riktig.
    en tekst som sier "Har du ikke en konto? Registrer deg her". dette skal være en link til registreringssiden
      -->


    <div class="container">
        <img src="bilder/BARK.png" height="50px" alt="bark icon">
        <h1>Logg inn til Barker</h1>
        <p class="errorMessage"></p>
        <div class="inputfield">
            <label for="brukernavn">Brukernavn</label>
            <input type="text" id="brukernavn" placeholder="">
        </div>
        <div class="inputfield">
            <label for="passord">Passord</label>
            <input type="password" id="passord" placeholder="">
        </div>
        <button type="submit">Logg inn</button>
        <a href="registrere.html">Har du ikke en konto? Registrer deg her</a>
    </div>
</body>
<script src="javascript/lib.js"></script>
<script>
    // legger til event listeners
    let loggInnKnapp = document.querySelector('button');
    loggInnKnapp.addEventListener('click', logInn);

    let inputBrukernavn = document.querySelector('#brukernavn');
    let inputPassord = document.querySelector('#passord');

    inputBrukernavn.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            inputPassord.focus();
        }
    });

    inputPassord.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            logInn();
        }
    });

    loggInnKnapp.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            logInn();
        }
    });







    function logInn(e) {
        let brukernavnEl = document.querySelector('#brukernavn');
        let passordEl = document.querySelector('#passord');
        let brukernavn = brukernavnEl.value;
        let passord = passordEl.value;
        
        if (brukernavn.length === 0) {
            console.log('Du må skrive inn brukernavn');
            let errorMessage = document.querySelector('.errorMessage');
            errorMessage.innerHTML = 'Du må skrive inn brukernavn';
            brukernavnEl.focus();
            return
        }
        if (passord.length === 0) {
            console.log('Du må skrive inn passord');
            let errorMessage = document.querySelector('.errorMessage');
            errorMessage.innerHTML = 'Du må skrive inn passord';
            passordEl.focus();
            return
        }


        if (testBrukernavnOgPassord(brukernavn, passord)) {
            console.log('Du er logget inn');
            settInnloggetBruker(brukernavn);
            window.location.href = 'home.html';
        } else {
            console.log('Feil brukernavn eller passord');
            let errorMessage = document.querySelector('.errorMessage');
            errorMessage.innerHTML = 'Feil brukernavn eller passord';
            brukernavnEl.focus();

        }

    }

</script>

</html>

